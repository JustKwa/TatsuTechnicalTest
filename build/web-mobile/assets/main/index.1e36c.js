System.register("chunks:///_virtual/CharacterView.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9e302voUXJL/JV2bP22U73X","CharacterView",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ConsumableEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemEffect.ts"],(function(t){var e,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.ItemEffect}],execute:function(){n._RF.push({},"605b6n1aMNMorb57jvBTl5I","ConsumableEffect",void 0);t("ConsumableEffect",function(t){function n(e,n){var o;return(o=t.call(this)||this).amount=e,o.type=n,o}return e(n,t),n.prototype.apply=function(t){switch(this.type){case"HP Potion":t.healHp(this.amount);break;case"MP Potion":t.healMp(this.amount)}},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/DebugTool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,r,a,u,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Label,l=e.Node,s=e.Component}],execute:function(){var c,p,d,b,h,g,m,f,L,D,M;r._RF.push({},"028a7pwLW5FV6VMW6pKzONW","DebugTool",void 0);var v=a.ccclass,N=a.property,y=e("DebugSignals",function(e){return e.LOSE_HP="lose-hp",e.LOSE_MP="lose-mp",e.GET_RANDOM_ITEM="get-random-item",e}({}));e("DebugTool",(c=v("DebugTool"),p=N(u),d=N(l),b=N(l),h=N(l),c((f=t((m=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"debugLabel",f,n(t)),t.isDebug=!1,i(t,"LoseHpNode",L,n(t)),i(t,"LoseMpNode",D,n(t)),i(t,"GetRandomItemNode",M,n(t)),t}o(t,e);var r=t.prototype;return r.checkEvent=function(){this.isDebug=!this.isDebug,this.debugLabel.string=this.isDebug?"Hide Debug":"Show Debug",this.isDebug?(this.LoseHpNode.active=!0,this.LoseMpNode.active=!0,this.GetRandomItemNode.active=!0):(this.LoseHpNode.active=!1,this.LoseMpNode.active=!1,this.GetRandomItemNode.active=!1)},r.loseHp=function(){var e=10+Math.floor(10*Math.random());this.node.emit(y.LOSE_HP,e)},r.loseMp=function(){var e=10+Math.floor(10*Math.random());this.node.emit(y.LOSE_MP,e)},r.getRandomItem=function(){this.node.emit(y.GET_RANDOM_ITEM)},t}(s)).prototype,"debugLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"LoseHpNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(m.prototype,"LoseMpNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(m.prototype,"GetRandomItemNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemContainer.ts","./InventorySlotUI.ts"],(function(t){var e,n,i,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){r=t.default},function(t){o=t.default}],execute:function(){var s;n._RF.push({},"bba4531ohZIXKn3TVb5P1M+","EquipmentController",void 0);var u=i.ccclass,a=t("EquipmentSignals",function(t){return t.SELECTED="selected",t}({}));t("default",u("EquipmentController")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){this.spawnInventorySlot(3)},i.addItem=function(t){var e=r.getItemDataByKey(t);if("Equipment"===e.type){this.itemsList.push(t);var n=this.getIndexByEquipmentType(e.equipmentType);if(-1!==n){var i=e.image;this.displayItem(n,i,t)}}},i.removeItem=function(t){var e=r.getItemDataByKey(t);if("Equipment"===e.type){var n=this.getIndexByEquipmentType(e.equipmentType);if(-1!==n)this.numberDisplayItems--,this.itemsList.splice(n,1),this.node.children[n].getComponent(o).clear()}},i.onSlotSelected=function(t,e){this.node.emit(a.SELECTED,t,e)},i.getIndexByEquipmentType=function(t){switch(t){case"Helmet":return 0;case"Armour":return 1;case"Boots":return 2;default:return-1}},i.isSlotTaken=function(t){var e=this.getIndexByEquipmentType(t);return this.node.children[e].getComponent(o).isBeingUsed()},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/EquippableEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemEffect.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.ItemEffect}],execute:function(){i._RF.push({},"39910Iq8Q9OwZRNdWREiBeK","EquippableEffect",void 0);t("EquippableEffect",function(t){function i(e){var i;return(i=t.call(this)||this).mod=e,i}return e(i,t),i.prototype.apply=function(t){t.addStatsModifier(this.mod)},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InventoryController.ts","./EquipmentController.ts","./ItemContainer.ts","./LoadManager.ts","./InventorySlotUI.ts","./UIController.ts","./PlayerController.ts","./ItemEffectController.ts","./DebugTool.ts"],(function(e){var t,n,o,r,i,l,a,u,s,p,c,m,f,y,h,d,g,C,b,I,v,E,w,S,D,T,q,P,O,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){a=e.cclegacy,u=e._decorator,s=e.Prefab,p=e.Node,c=e.UIOpacity,m=e.tween,f=e.Component,y=e.resources,h=e.JsonAsset,d=e.SpriteAtlas},function(e){g=e.default,C=e.InventorySignals},function(e){b=e.default,I=e.EquipmentSignals},function(e){v=e.default},function(e){E=e.default},function(e){w=e.default},function(e){S=e.default,D=e.HUDSignals},function(e){T=e.default,q=e.PlayerSignals},function(e){P=e.ItemEffectController},function(e){O=e.DebugTool,M=e.DebugSignals}],execute:function(){var _,L,U,z,A,k,V,N,B,G,R,x,K,H,j,F,J,Q,W,X,Y,Z;a._RF.push({},"385dagu2R1Pn4yJ/4PyplES","GameController",void 0);var $=u.ccclass,ee=u.property,te=u.executionOrder;e("default",(_=$("GameController"),L=te(0),U=ee({type:s,group:"ItemContainer"}),z=ee({type:g,group:"ItemContainer"}),A=ee({type:b,group:"ItemContainer"}),k=ee({type:T,group:"PlayerController"}),V=ee({type:O,group:"DebugTool"}),N=ee({type:p,group:"Intro Animation"}),B=ee({type:c,group:"Intro Animation"}),G=ee({type:c,group:"Intro Animation"}),R=ee({type:c,group:"Intro Animation"}),_(x=L((H=t((K=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,o(t,"uiSlotPrefab",H,r(t)),o(t,"inventoryController",j,r(t)),o(t,"equipmentController",F,r(t)),o(t,"playerController",J,r(t)),o(t,"debugTool",Q,r(t)),o(t,"cameraNode",W,r(t)),o(t,"topViewOpacity",X,r(t)),o(t,"bottomViewOpacity",Y,r(t)),o(t,"debugViewOpacity",Z,r(t)),t.hudController=null,t.itemEffectController=new P,t.itemsData=null,t}n(t,e);var a=t.prototype;return a.onLoad=function(){var e=this;this.hudController=this.node.getComponent(S),this.hudController.node.on(D.ITEM_USED,this.onItemUsed,this),v.inject(this.getItemDataByKey.bind(this),this.uiSlotPrefab),this.inventoryController.node.on(C.SELECTED,this.onItemSelected,this),this.equipmentController.node.on(I.SELECTED,this.onEquipmentSelected,this),this.playerController.node.on(q.STATS_MODIFIED,this.onPlayerStatsModified,this),this.debugTool.node.on(M.LOSE_HP,this.onLoseHp,this),this.debugTool.node.on(M.LOSE_MP,this.onLoseMp,this),this.debugTool.node.on(M.GET_RANDOM_ITEM,this.onGetRandomItem,this),E.subscribe("intro-animation",(function(){m(e.cameraNode.position).delay(.2).by(1,{y:0},{onStart:function(){e.cameraNode.setPosition(0,-10)},onUpdate:function(t,n){e.cameraNode.setPosition(t),e.topViewOpacity.opacity=255*n,e.bottomViewOpacity.opacity=255*n,e.debugViewOpacity.opacity=255*n},easing:"sineIn"}).start()}),this),this.loadItemsData(),this.loadItemsAtlas()},a.loadItemsData=function(){var e=i(l().mark((function e(){var t,n,o=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.registerChecker(),"items/items_data",n=new Promise((function(e,t){return y.load("items/items_data",h,(function(n,o){n?t(n):e(o)}))})),e.next=5,Promise.resolve(n).then((function(e){o.itemsData=e.json,E.completeChecker(t)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.loadItemsAtlas=function(){var e=i(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.registerChecker(),"items/items_atlas",n=new Promise((function(e,t){return y.load("items/items_atlas",d,(function(n,o){n?t(n):e(o)}))})),e.next=5,Promise.resolve(n).then((function(e){w.inject(e),E.completeChecker(t)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.getItemDataByKey=function(e){return this.itemsData.items[e]},a.onItemSelected=function(e,t){this.hudController.showTooltip(t,this.getItemDataByKey(e),e)},a.onItemUsed=function(e,t){var n=this.getItemDataByKey(e);if(n)if("UNEQUIP"!==t){var o=this.itemEffectController.getEffect(e,n);switch(n.type){case"Consumable":this.inventoryController.removeItem(e),this.playerController.addItem(o);break;case"Equipment":if(this.equipmentController.isFull())return;if(this.equipmentController.isSlotTaken(n.equipmentType))return;this.inventoryController.removeItem(e),this.equipmentController.addItem(e),this.playerController.addItem(o,{image:n.image,equipmentType:n.equipmentType})}}else this.onEquipmentUnequipped(e)},a.onEquipmentSelected=function(e,t){this.hudController.showTooltip(t,this.getItemDataByKey(e),e,!0)},a.onEquipmentUnequipped=function(e){this.inventoryController.addItem(e),this.equipmentController.removeItem(e);var t=this.getItemDataByKey(e),n=this.itemEffectController.getEffect(e,t);"Equipment"===t.type&&this.playerController.removeEquipment(n,t.equipmentType)},a.onPlayerStatsModified=function(e){this.hudController.updateStats(e)},a.onLoseHp=function(e){this.playerController.takeDamage(e)},a.onLoseMp=function(e){this.playerController.useMp(e)},a.onGetRandomItem=function(){var e=["potion-hp","potion-mp"],t=e[Math.floor(Math.random()*e.length)];this.inventoryController.addItem(t)},t}(f)).prototype,"uiSlotPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(K.prototype,"inventoryController",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(K.prototype,"equipmentController",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(K.prototype,"playerController",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(K.prototype,"debugTool",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(K.prototype,"cameraNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(K.prototype,"topViewOpacity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(K.prototype,"bottomViewOpacity",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(K.prototype,"debugViewOpacity",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=K))||x)||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/InventoryController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ItemContainer.ts","./LoadManager.ts"],(function(t){var n,e,r,o,i,s,a,c,u;return{setters:[function(t){n=t.inheritsLoose,e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy,i=t._decorator,s=t.resources,a=t.JsonAsset},function(t){c=t.default},function(t){u=t.default}],execute:function(){var l;o._RF.push({},"065e2A15tFGnZ55XINvWg60","InventoryController",void 0);var f=i.ccclass,v=t("InventorySignals",function(t){return t.SELECTED="selected",t}({}));t("default",f("InventoryController")(l=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var i=o.prototype;return i.onLoad=function(){t.prototype.onLoad.call(this),this.loadInventoryData()},i.start=function(){this.spawnInventorySlot(20)},i.loadInventoryData=function(){var t=e(r().mark((function t(){var n,e,o=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.registerChecker(),"items/inventory_data",e=new Promise((function(t,n){return s.load("items/inventory_data",a,(function(e,r){e?n(e):t(r)}))})),t.next=5,Promise.resolve(e).then((function(t){var e=t.json;e.items&&(e.items.forEach((function(t){o.itemsList.push(t)})),u.completeChecker(n))}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.onSlotSelected=function(t,n){this.node.emit(v.SELECTED,t,n)},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/InventorySlotUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadManager.ts"],(function(t){var e,n,i,o,r,s,a,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Sprite,l=t.Toggle,u=t.Component},function(t){c=t.default}],execute:function(){var p,m,d,h,f,S;r._RF.push({},"d6732GYZR9CSItsW3MNWqd+","InventorySlotUI",void 0);var b=s.ccclass,C=s.property,g=t("SlotSignals",function(t){return t.SELECTED="selected",t}({}));t("default",(p=b("ItemSlotUI"),m=C(a),p(((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"itemSprite",f,o(e)),e.spriteComponent=null,e.buttonComponent=null,e.isSelected=!1,e.currentItemKey="",e}n(e,t),e.inject=function(t){e.atlas=t};var r=e.prototype;return r.onLoad=function(){var t=this;this.spriteComponent=this.node.getComponent(a),this.buttonComponent=this.node.getComponent(l),c.subscribe("ui-slot-"+e.uid++,(function(){e.atlas&&(t.spriteComponent.spriteFrame=e.atlas.getSpriteFrame("ui-border"))}),this)},r.setItemSprite=function(t,n){this.itemSprite.spriteFrame=e.atlas.getSpriteFrame(t),this.currentItemKey=n,this.buttonComponent.enabled=!0,this.buttonComponent.interactable=!0},r.onTapped=function(){this.isSelected=!this.isSelected;var t=this.node.getWorldPosition();this.node.emit(g.SELECTED,this.currentItemKey,t)},r.clear=function(){this.itemSprite.spriteFrame=null,this.buttonComponent.enabled=!1,this.buttonComponent.interactable=!1},r.isBeingUsed=function(){return this.buttonComponent.interactable},e}(u)).atlas=null,S.uid=0,f=e((h=S).prototype,"itemSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemContainer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InventorySlotUI.ts","./LoadManager.ts"],(function(t){var e,n,i,s,o,a,r,l,m;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Layout,o=t.instantiate,a=t.Component},function(t){r=t.SlotSignals,l=t.default},function(t){m=t.default}],execute:function(){var u,c;n._RF.push({},"ad0d9gPcnZCnJXe5cm+kGx0","ItemContainer",void 0);var h=i.ccclass,d=i.requireComponent;t("default",h("ItemContainer")(u=d(s)(((c=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).layoutComponent=null,e.itemsList=[],e.numberDisplayItems=0,e}e(n,t),n.inject=function(t,e){n.getItemDataByKey=t,n.inventorySlotPrefab=e};var i=n.prototype;return i.onLoad=function(){this.layoutComponent=this.node.getComponent(s),m.subscribe("item-container",this.onDataFinishedLoading,this)},i.spawnInventorySlot=function(t){void 0===t&&(t=10);for(var e=0;e<t;e++){var i=o(n.inventorySlotPrefab);i.on(r.SELECTED,this.onSlotSelected,this),this.node.addChild(i)}},i.removeItem=function(t){var e=this.itemsList.indexOf(t);if(-1!==e){this.numberDisplayItems--;var n=this.node.children[e];n.getComponent(l).clear(),n.setSiblingIndex(this.itemsList.length),this.itemsList.splice(e,1)}},i.addItem=function(t){this.itemsList.push(t);var e=this.itemsList.length-1,i=n.getItemDataByKey(t).image;this.displayItem(e,i,t)},i.onDataFinishedLoading=function(){if(this.itemsList)for(var t=0;t<this.itemsList.length;t++){var e=n.getItemDataByKey(this.itemsList[t]);this.displayItem(t,e.image,this.itemsList[t])}},i.displayItem=function(t,e,n){this.numberDisplayItems++,this.node.children[t].getComponent(l).setItemSprite(e,n)},i.isFull=function(){return this.numberDisplayItems===this.node.children.length},n}(a)).inventorySlotPrefab=null,c.getItemDataByKey=null,u=c))||u)||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ItemData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"45a9b3OtvFHv5SCUJvaLSPw","ItemData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ItemEffect.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8f059dU7ahFxZ0aaPvuto73","ItemEffect",void 0);t("ItemEffect",(function(){}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ItemEffectController.ts",["cc","./ConsumableEffect.ts","./EquippableEffect.ts"],(function(e){var t,f,c;return{setters:[function(e){t=e.cclegacy},function(e){f=e.ConsumableEffect},function(e){c=e.EquippableEffect}],execute:function(){t._RF.push({},"436b2HIH61N6ZRR61JUxpcl","ItemEffectController",void 0);e("ItemEffectController",function(){function e(){this.effects=new Map}return e.prototype.getEffect=function(e,t){if(this.effects.has(e))return this.effects.get(e);switch(t.type){case"Consumable":var n=new f(t.value,t.consumableType);return this.effects.set(e,n),n;case"Equipment":var s=new c(t.statsModifier);return this.effects.set(e,s),s}},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ItemGameObject.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c33ee1yolZBY67/wVfVLYWx","ItemGameObject",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadManager.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ae459bYfaBFzoitTZaTGo67","LoadManager",void 0);var s=function(){function e(){this.subscribers=new Map,this.checkers=new Map,this.isLoadComplete=!1}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var t=e.prototype;return t.subscribe=function(e,t,s){this.subscribers.set(e,t.bind(s))},t.unsubscribe=function(e){this.subscribers.delete(e)},t.registerChecker=function(){var e=Math.random().toString(36).substring(2,15);return this.checkers.set(e,!1),e},t.completeChecker=function(e){this.checkers.has(e)&&(this.checkers.set(e,!0),this.checkLoadCompletion())},t.checkLoadCompletion=function(){this.isLoadComplete||Array.from(this.checkers.values()).every((function(e){return!0===e}))&&(this.isLoadComplete=!0,this.invokeSubscribers())},t.invokeSubscribers=function(){this.subscribers.forEach((function(e){return e()}))},t.forceCompleteLoad=function(){this.isLoadComplete=!0,this.invokeSubscribers()},t.reset=function(){this.subscribers.clear(),this.checkers.clear(),this.isLoadComplete=!1},e}();s.instance=void 0;e("default",s.getInstance());t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./DebugTool.ts","./GameController.ts","./ItemEffectController.ts","./LoadManager.ts","./PlayerController.ts","./UIController.ts","./EquipmentController.ts","./InventoryController.ts","./ItemContainer.ts","./ItemData.ts","./ItemGameObject.ts","./ConsumableEffect.ts","./EquippableEffect.ts","./ItemEffect.ts","./StatsData.ts","./CharacterView.ts","./InventorySlotUI.ts","./StatsUI.ts","./TooltipCancelLayer.ts","./TooltipPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StatsData.ts","./EquippableEffect.ts","./LoadManager.ts"],(function(t){var e,i,r,n,s,a,o,p,u,l,c,h,m,f,S,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){o=t.cclegacy,p=t._decorator,u=t.Sprite,l=t.tween,c=t.Component,h=t.resources,m=t.SpriteAtlas},function(t){f=t.PlayerStats},function(t){S=t.EquippableEffect},function(t){d=t.default}],execute:function(){var b,y,E,q,g,A,D,F,_;o._RF.push({},"e3340L03MRDOo5bVPJB5AdP","PlayerController",void 0);var T=p.ccclass,I=p.property,v=t("PlayerSignals",function(t){return t.STATS_MODIFIED="stats-modified",t}({}));t("default",(b=T("PlayerController"),y=I({type:u,group:"Equipment"}),E=I({type:u,group:"Equipment"}),q=I({type:u,group:"Equipment"}),b((D=e((A=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"helmetSprite",D,n(e)),r(e,"armourSprite",F,n(e)),r(e,"bootsSprite",_,n(e)),e.baseStats=null,e.currentStats=null,e.equipmentEffects=[],e.equippableAtlas=null,e.spriteComponent=null,e.idleAnimation=null,e}i(e,t);var o=e.prototype;return o.onLoad=function(){var t=this;this.spriteComponent=this.node.getComponent(u);this.baseStats=new f({max_hp:100,max_mp:100,strength:20,agility:20,intelligence:20}),this.currentStats=this.baseStats.clone(),this.node.emit(v.STATS_MODIFIED,this.currentStats),this.loadEquippableAtlas(),l(this.node.position).by(1.5,{y:15},{onUpdate:function(e){t.node.setPosition(e)},easing:"linear"}).delay(.2).to(1.5,{y:0},{onUpdate:function(e){t.node.setPosition(e)},easing:"linear"}).delay(.2).union().repeatForever().start(),d.subscribe("player-base",this.onEquippableLoaded,this)},o.addItem=function(t,e){t.apply(this),t instanceof S&&(this.equipmentEffects.push(t),e&&this.displayEquipment(e.image,e.equipmentType))},o.removeEquipment=function(t,e){if(t instanceof S){var i=this.equipmentEffects.indexOf(t);-1!==i&&(this.equipmentEffects.splice(i,1),this.reappliedEffects(),this.clearEquipment(e),this.node.emit(v.STATS_MODIFIED,this.currentStats))}},o.addStatsModifier=function(t){this.currentStats=this.currentStats.addModifier(t),this.node.emit(v.STATS_MODIFIED,this.currentStats)},o.takeDamage=function(t){this.currentStats.current_hp-=t,this.node.emit(v.STATS_MODIFIED,this.currentStats)},o.useMp=function(t){this.currentStats.current_mp-=t,this.node.emit(v.STATS_MODIFIED,this.currentStats)},o.healHp=function(t){this.currentStats.current_hp+=t,this.node.emit(v.STATS_MODIFIED,this.currentStats)},o.healMp=function(t){this.currentStats.current_mp+=t,this.node.emit(v.STATS_MODIFIED,this.currentStats)},o.reappliedEffects=function(){this.currentStats.copy(this.baseStats);for(var t=0;t<this.equipmentEffects.length;t++)this.equipmentEffects[t].apply(this)},o.loadEquippableAtlas=function(){var t=s(a().mark((function t(){var e,i,r=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.registerChecker(),"items/equippable_atlas",i=new Promise((function(t,e){return h.load("items/equippable_atlas",m,(function(i,r){i?e(i):t(r)}))})),t.next=5,Promise.resolve(i).then((function(t){r.equippableAtlas=t,d.completeChecker(e)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o.onEquippableLoaded=function(){this.equippableAtlas&&(this.spriteComponent.spriteFrame=this.equippableAtlas.getSpriteFrame("player-base"))},o.displayEquipment=function(t,e){switch(e){case"Helmet":this.helmetSprite.spriteFrame=this.equippableAtlas.getSpriteFrame(t);break;case"Armour":this.armourSprite.spriteFrame=this.equippableAtlas.getSpriteFrame(t);break;case"Boots":this.bootsSprite.spriteFrame=this.equippableAtlas.getSpriteFrame(t)}},o.clearEquipment=function(t){switch(t){case"Helmet":this.helmetSprite.spriteFrame=null;break;case"Armour":this.armourSprite.spriteFrame=null;break;case"Boots":this.bootsSprite.spriteFrame=null}},e}(c)).prototype,"helmetSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(A.prototype,"armourSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(A.prototype,"bootsSprite",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/StatsData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fc07eSMCmhKObPORouZUm68","StatsData",void 0);t("PlayerStats",function(){function t(t){void 0===t&&(t={max_hp:0,max_mp:0,strength:0,agility:0,intelligence:0}),this.max_hp=void 0,this._current_hp=void 0,this.max_mp=void 0,this._current_mp=void 0,this.strength=void 0,this.agility=void 0,this.intelligence=void 0,this.max_hp=t.max_hp||0,this.max_mp=t.max_mp||0,this.strength=t.strength||0,this.agility=t.agility||0,this.intelligence=t.intelligence||0,this.current_hp=this.max_hp,this.current_mp=this.max_mp}var e=t.prototype;return e.clone=function(){return new t(this)},e.addModifier=function(t){return this.max_hp+=t.max_hp||0,this.max_mp+=t.max_mp||0,this.strength+=t.strength||0,this.agility+=t.agility||0,this.intelligence+=t.intelligence||0,this},e.addModifiers=function(t){for(var i=0;i<t.length;i++)this.addModifier(t[i]);return this},e.removeModifier=function(t,i){return i.max_hp=this.max_hp-t.max_hp||0,i.max_mp=this.max_mp-t.max_mp||0,i.strength=this.strength-t.strength||0,i.agility=this.agility-t.agility||0,i.intelligence=this.intelligence-t.intelligence||0,i},e.toString=function(){return"HP: "+this.current_hp+"/"+this.max_hp+" MP: "+this.current_mp+"/"+this.max_mp+" STR: "+this.strength+" AGI: "+this.agility+" INT: "+this.intelligence},e.copy=function(t){this.max_hp=t.max_hp,this.max_mp=t.max_mp,this.strength=t.strength,this.agility=t.agility,this.intelligence=t.intelligence,this.current_hp=t.current_hp,this.current_mp=t.current_mp},i(t,[{key:"current_hp",get:function(){return this._current_hp},set:function(t){this._current_hp=t,this._current_hp>this.max_hp&&(this._current_hp=this.max_hp)}},{key:"current_mp",get:function(){return this._current_mp},set:function(t){this._current_mp=t,this._current_mp>this.max_mp&&(this._current_mp=this.max_mp)}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/StatsUI.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,i,n,a,l,o,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,u=e.ProgressBar,s=e.Component}],execute:function(){var p,c,b,g,f,h,m,L,y,_,z,P,w,B,d,v,S;a._RF.push({},"eb8428ruZRDoauT/FS7bkFf","StatsUI",void 0);var x=l.ccclass,D=l.property;e("default",(p=x("StatsUI"),c=D(o),b=D(o),g=D(o),f=D(u),h=D(o),m=D(u),L=D(o),p((z=r((_=function(e){function r(){for(var r,t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,i(r,"strLabel",z,n(r)),i(r,"agiLabel",P,n(r)),i(r,"intLabel",w,n(r)),i(r,"hpProgressBar",B,n(r)),i(r,"hpLabel",d,n(r)),i(r,"mpProgressBar",v,n(r)),i(r,"mpLabel",S,n(r)),r}return t(r,e),r.prototype.updateStats=function(e){this.strLabel.string=""+e.strength,this.agiLabel.string=""+e.agility,this.intLabel.string=""+e.intelligence,this.hpProgressBar.progress=e.current_hp/e.max_hp,this.hpLabel.string=e.current_hp+"/"+e.max_hp,this.mpProgressBar.progress=e.current_mp/e.max_mp,this.mpLabel.string=e.current_mp+"/"+e.max_mp},r}(s)).prototype,"strLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(_.prototype,"agiLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(_.prototype,"intLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=r(_.prototype,"hpProgressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=r(_.prototype,"hpLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(_.prototype,"mpProgressBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=r(_.prototype,"mpLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=_))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipCancelLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TooltipPanel.ts"],(function(t){var e,o,i,n,r,l,a,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Node,c=t.Component},function(t){p=t.default}],execute:function(){var u,s,f,h,d;r._RF.push({},"fc762thI3VLX7gM+aZ4qcMG","TooltipCancelLayer",void 0);var y=l.ccclass,T=l.property;t("default",(u=y("TooltipCancelLayer"),s=T(p),u((d=e((h=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"tooltipPanel",d,n(e)),e}o(e,t);var r=e.prototype;return r.onLoad=function(){this.node.on(a.EventType.TOUCH_END,this.hideTooltip,this)},r.hideTooltip=function(){this.tooltipPanel.hideTooltip()},e}(c)).prototype,"tooltipPanel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/TooltipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,s,r,o,a,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,a=t.Label,l=t.UITransform,u=t.Component}],execute:function(){var c,p,h,b,g,f,d,m,y,L,S;r._RF.push({},"58457Rc2wtIYr1kxbvGP59o","TooltipPanel",void 0);var P=o.ccclass,v=o.property,E=t("TooltipSignals",function(t){return t.USE_BUTTON_PRESSED="use-button-pressed",t}({}));t("UseButtonTexts",["EQUIP","UNEQUIP","USE"]),t("default",(c=P("TooltipPanel"),p=v(a),h=v(a),b=v(a),g=v(a),c((m=e((d=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,n(e,"titleLabel",m,s(e)),n(e,"descriptionLabel",y,s(e)),n(e,"statsLabel",L,s(e)),n(e,"useLabel",S,s(e)),e.currentItemKey="",e}i(e,t);var r=e.prototype;return r.start=function(){this.node.active=!1},r.displayItem=function(t,e,i){switch(this.node.active=!0,this.currentItemKey=e,t.type){case"Consumable":this.displayConsumable(t);break;case"Equipment":this.displayEquipment(t,i)}},r.hideTooltip=function(){this.titleLabel.string="",this.descriptionLabel.string="",this.statsLabel.string="",this.node.active=!1},r.formatDescription=function(t,e){return t.replace(/{(\w+)}/g,(function(t,i){return null!=e[i]?String(e[i]):"{"+i+"}"}))},r.displayConsumable=function(t){this.useLabel.string="USE",this.titleLabel.string=t.name,this.descriptionLabel.string=this.formatDescription(t.description,{value:t.value})},r.displayEquipment=function(t,e){var i=e?"UNEQUIP":"EQUIP";this.useLabel.string=i,this.titleLabel.string=t.name;var n=t.statsModifier,s=n.max_hp?this.getStatsRow("HP",n.max_hp):"",r=n.max_mp?this.getStatsRow("MP",n.max_mp):"",o=n.strength?this.getStatsRow("STR",n.strength):"",a=n.agility?this.getStatsRow("AGI",n.agility):"",l=n.intelligence?this.getStatsRow("INT",n.intelligence):"";this.descriptionLabel.string=t.description,this.statsLabel.string=""+s+r+o+a+l},r.onUseButtonPressed=function(){this.node.emit(E.USE_BUTTON_PRESSED,this.currentItemKey,this.useLabel.string),this.hideTooltip()},r.getHeight=function(){return this.node.getComponent(l).height},r.getStatsRow=function(t,e){return"\n"+t+": "+e},r.setWorldPosition=function(t){this.node.setWorldPosition(t)},e}(u)).prototype,"titleLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(d.prototype,"descriptionLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(d.prototype,"statsLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(d.prototype,"useLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TooltipPanel.ts","./StatsUI.ts"],(function(t){var e,o,i,n,l,r,s,a,u,c,p,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,s=t.view,a=t.Vec3,u=t.Component},function(t){c=t.default,p=t.TooltipSignals},function(t){h=t.default}],execute:function(){var d,f,P,m,g,U,b;l._RF.push({},"ab5ce0d0oZPHp4FoZcSqEPv","UIController",void 0);var S=r.ccclass,y=r.property,v=t("HUDSignals",function(t){return t.ITEM_USED="item-used",t}({}));t("default",(d=S("UIController"),f=y(c),P=y(h),d((U=e((g=function(t){function e(){for(var e,o=arguments.length,l=new Array(o),r=0;r<o;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,i(e,"tooltipPanel",U,n(e)),i(e,"statsUI",b,n(e)),e.bound=null,e.minVector=null,e.maxVector=null,e}o(e,t);var l=e.prototype;return l.onLoad=function(){this.tooltipPanel.node.on(p.USE_BUTTON_PRESSED,this.onUseButtonPressed,this),this.bound=s.getVisibleSize(),this.minVector=new a(210,0,0),this.maxVector=new a(this.bound.width-210,this.bound.height-10,0)},l.showTooltip=function(t,e,o,i){void 0===i&&(i=!1),this.tooltipPanel.displayItem(e,o,i);var n=t.clone();n=t.add3f(i?-255:0,i?-this.tooltipPanel.getHeight()/2:55,0).clampf(this.minVector,new a(this.maxVector.x,this.maxVector.y-this.tooltipPanel.getHeight())),this.tooltipPanel.setWorldPosition(n)},l.onUseButtonPressed=function(t,e){this.node.emit(v.ITEM_USED,t,e)},l.updateStats=function(t){this.statsUI.updateStats(t)},e}(u)).prototype,"tooltipPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(g.prototype,"statsUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});